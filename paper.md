---
title: 'ztfquery: python package to access Zwicky Transient Facility data'
tags:
  - Python
  - astronomy
  - ztf
authors:
  - name: Mickael Rigault
    orcid: 0000-0002-8121-2560
    affiliation: 1 
affiliations:
 - name:  Universite Clermont Auvergne, CNRS/IN2P3, Laboratoire de Physique de Clermont, F-63000 Clermont-Ferrand, France.
   index: 1
date: 1 March 2020
bibliography: paper.bib


# Optional fields if submitting to a AAS journal too, see this blog post:
---

# Summary

`ztfquery` is a python package built to download data generated by the Zwicky Transient Facility (ZTF, @bellm:2019; @graham:2019). I

## ZTF products
This part of the software is the core of `ztfquery` and enables to access images and catalogs produced by the ZTF camera installed on the Palomar P48 telescope. These data are  produced by the ZTF pipeline detailed in @masci:2019. See the data [ZTF webpage](https://irsa.ipac.caltech.edu/Missions/ztf.html) to see which data are publically available.

Accessing the data needs two steps: 
1. find the metadata associated to your query
2. download the data you want.

The first step need to know how to build the IRSA url from where the data are downloaded. See [IRSA API](https://irsa.ipac.caltech.edu/docs/program_interface/ztf_api.html)

Example:
```python
from ztfquery import query
zquery = query.ZTFQuery()

# Step 1, load the meta data (NB: Julian Date of 14th of May 2018 is 2458252.
zquery.load_metadata(radec=[276.107960,+44.130398], size=0.01, sql_query="seeing<2 and obsjd>2458252.5")
# As of when the README was being written, this had 42 entries (only partnership data)
zquery.metatable[["obsjd", "seeing", "filtercode"]]
"""
	obsjd	seeing	filtercode
0	2.458277e+06	1.83882	zr
1	2.458277e+06	1.84859	zr
2	2.458268e+06	1.74317	zi
3	2.458269e+06	1.65564	zr
4	2.458267e+06	1.90791	zr
...
35	2.458253e+06	1.84952	zr
36	2.458273e+06	1.77137	zr
37	2.458270e+06	1.71865	zr
38	2.458274e+06	1.84936	zg
39	2.458270e+06	1.60568	zr
40	2.458253e+06	1.98775	zr
41	2.458275e+06	1.99942	zg
"""

# Downloading the Data
zquery.download_data("psfcat.fits", show_progress=False)
```

See package [README](https://github.com/MickaelRigault/ztfquery) for additional examples.

## Other tools

In addition, other tools are available inside ztfquery that enables to access other data source. Most are private and requires access. These are:
 IPAC | requires access)_)

- **Marshal Data:** tools to download [Marshal](http://skipper.caltech.edu:8080/cgi-bin/growth/marshal.cgi) data, including alert lightcurves and target coordinates _(requires access)_

- **SEDM Data:** tools to download SEDM data, including IFU cubes and target spectra, from [pharos](http://pharos.caltech.edu) _(requires access)_

- **ZTF alert:** Currently only a simple alert reader.


# Acknowledgements

This software development has received funding from the European Research Council (ERC) under the European Union's Horizon 2020 research and innovation programme (grant agreement nÂ°759194 - USNAC)

# References
